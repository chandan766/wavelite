<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

  <!-- ✅ Optimized Title for SEO -->
  <title>WaveLite Chat - Peer-to-Peer WebRTC Chat & File Sharing App</title>
  
  <!-- ✅ SEO Meta Description -->
  <meta name="description" content="WaveLite Chat is a secure, peer-to-peer chat app using WebRTC. Send text and files (images, video, audio) directly between browsers without a server. Try it free now!" />
  
  <!-- ✅ Open Graph Meta for Social Sharing -->
  <meta property="og:title" content="WaveLite Chat - P2P Chat App with WebRTC" />
  <meta property="og:description" content="WaveLite Chat lets you chat and share files securely using WebRTC. No servers, no data stored. 100% browser-based and free." />
  <meta name="keywords" content="WaveLite, WebRTC chat, peer to peer messaging, secure chat app, private chat, private file sharing, no server chat, without server messaging, serverless chat app, video chat, audio chat, browser-based messenger, WebRTC file transfer, encrypted messaging, P2P chat app, free online chat tool, real-time communication app, anonymous chat app">
  <meta property="og:url" content="https://wavelite.pages.dev/" />
  <meta property="og:type" content="website" />
  
  <!-- ✅ Twitter Card Meta -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="WaveLite Chat - Secure P2P WebRTC Chat App" />
  <meta name="twitter:description" content="WaveLite Chat is a real-time chat app using WebRTC. Chat peer-to-peer, no servers or accounts needed." />
  
  <!-- ✅ Canonical URL for Indexing -->
  <link rel="canonical" href="https://wavelite.pages.dev/" />
  <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />
  
  <!-- ✅ Favicon (Optional but Good for Branding) -->
  <link rel="icon" href="assets/img/favicon.ico" type="image/x-icon" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome Icons -->
  <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
  <!-- Plyr CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.css" />
  <!-- Animate.css for smooth animations -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <!-- Custom CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- Leaflet.js (for map) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

</head>

<body class="chat-app">
  <!-- Theme Toggle -->
  <div class="theme-toggle">
    <button id="themeToggle" class="btn btn-outline-secondary btn-sm">
      <i class="fas fa-moon" id="themeIcon"></i>
    </button>
  </div>

  <!-- Login Section -->
  <div id="login-section" class="login-container">
    <div class="login-card animate__animated animate__fadeInUp">
      <div class="login-header">
        <div class="app-logo">
          <i class="fas fa-comments"></i>
        </div>
        <h2 class="app-title">WaveLite Chat</h2>
        <p class="app-subtitle">Secure peer-to-peer messaging</p>
      </div>
      
      <form id="peerForm" class="login-form">
        <div class="form-group">
          <label for="chat-username" class="form-label">
            <i class="fas fa-user"></i> Your Name
          </label>
          <input type="text" id="chat-username" class="form-control" maxlength="20" placeholder="Enter your name">
          <span id="name-error" class="error-message"></span>
        </div>
        
        <div class="form-group">
          <label for="peer-id" class="form-label">
            <i class="fas fa-id-badge"></i> Peer ID
          </label>
          <input type="text" id="peer-id" class="form-control" maxlength="100" placeholder="Enter Peer ID">
          <span id="peer-error" class="error-message"></span>
        </div>
        
        <div class="button-group">
          <button type="submit" id="peerIdSubmit" class="btn btn-primary">
            <i class="fas fa-plug"></i> Connect
          </button>
          <button type="button" id="joinPeer" class="btn btn-outline-primary">
            <i class="fas fa-sign-in-alt"></i> Join
          </button>
        </div>
      </form>
      
      <!-- Connection Status -->
      <div id="connectionStatusPanel" class="connection-status d-none">
        <div class="status-content">
          <div class="spinner-border text-primary" role="status"></div>
          <span id="connectionStatusText">Initializing connection...</span>
        </div>
        <div class="progress">
          <div id="connectionProgressBar" class="progress-bar" role="progressbar" style="width: 10%;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Chat Interface -->
  <div id="chat-section" class="chat-interface d-none">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <div class="user-profile">
          <div class="user-avatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="user-info">
            <div class="user-name" id="headerBtnName">WaveLite</div>
            <div class="user-status" id="status">Offline</div>
          </div>
        </div>
        <div class="sidebar-actions">
          <button class="btn btn-sm btn-outline-light" id="settingBtn" data-bs-toggle="modal" data-bs-target="#savePeerModal" title="Settings">
            <i class="fas fa-cog"></i>
          </button>
          <div class="dropdown">
            <button class="btn btn-sm btn-outline-light" id="infoDropdown" data-bs-toggle="dropdown">
              <i class="fas fa-ellipsis-v"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="#" id="reloadBtn"><i class="fas fa-rotate me-2"></i>Refresh</a></li>
              <li><a class="dropdown-item" href="usermanual.html"><i class="fas fa-book me-2"></i>User Manual</a></li>
              <li><a class="dropdown-item" href="feedback.html"><i class="fas fa-comment-dots me-2"></i>Feedback</a></li>
              <li><a class="dropdown-item" href="faq.html"><i class="fas fa-question-circle me-2"></i>FAQ</a></li>
              <li><a class="dropdown-item" href="about.html"><i class="fas fa-info-circle me-2"></i>About</a></li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="search-container">
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="Search messages..." class="search-input">
        </div>
      </div>
      
      <div class="contacts-list">
        <div class="contact-item active">
          <div class="contact-avatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="contact-info">
            <div class="contact-name" id="peerContactName">Peer</div>
            <div class="contact-last-message">Click to start chatting</div>
          </div>
          <div class="contact-status">
            <div class="status-indicator offline"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Chat Area -->
    <div class="chat-area">
      <!-- Chat Header -->
      <div class="chat-header">
        <div class="chat-user-info">
          <button class="mobile-menu-btn d-md-none" id="mobileMenuBtn" title="Menu">
            <i class="fas fa-bars"></i>
          </button>
          <div class="chat-avatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="chat-user-details">
            <div class="chat-user-name" id="chatPeerName">Peer</div>
            <div class="chat-user-status" id="chatPeerStatus">Offline</div>
          </div>
        </div>
        <div class="chat-actions">
          <button class="btn btn-sm btn-outline-primary" id="callBtn" title="Voice Call">
            <i class="fas fa-phone"></i>
          </button>
          <button class="btn btn-sm btn-outline-primary" id="videoCallBtn" title="Video Call">
            <i class="fas fa-video"></i>
          </button>
          <button class="btn btn-sm btn-outline-secondary" id="delete-all-btn" title="Disconnect">
            <i class="fas fa-sign-out-alt"></i>
          </button>
        </div>
      </div>

      <!-- Messages Area -->
      <div id="chat-display" class="messages-container">
        <div class="welcome-message">
          <div class="welcome-icon">
            <i class="fas fa-comments"></i>
          </div>
          <h4>Welcome to WaveLite Chat</h4>
          <p>Start a conversation by sending a message</p>
        </div>
      </div>

      <!-- Message Input -->
      <div class="message-input-container">
        <div id="text-input-group" class="input-group">
          <button id="btn-toggle" class="btn btn-outline-secondary attachment-btn" title="Attach">
            <i class="fas fa-paperclip"></i>
          </button>
          <input type="text" id="chat-message" class="form-control message-input" placeholder="Type a message..." maxlength="1000">
          <button id="btn-send-text" class="btn btn-primary send-btn">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>

        <div id="media-input-group" class="input-group d-none">
          <button id="btn-toggle-back" class="btn btn-outline-secondary">
            <i class="fas fa-times"></i>
          </button>
          <div class="file-info">
            <input type="file" id="chat-file" class="visually-hidden">
            <button id="btn-choose-file" class="btn btn-outline-secondary">
              <i class="fas fa-folder-open"></i> Choose File
            </button>
            <div id="selected-file-name" class="file-name">No file selected</div>
            <button id="clear-file" class="btn btn-outline-danger d-none">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <button id="btn-send-media" class="btn btn-primary">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- Attachment Menu -->
  <div id="attachment-menu" class="attachment-menu d-none">
    <div class="attachment-header">
      <h6>Attach File</h6>
      <button class="btn btn-sm btn-outline-secondary" id="closeAttachmentMenu">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="attachment-grid">
      <button class="attachment-btn" data-type="image">
        <i class="fas fa-image"></i>
        <span>Image</span>
      </button>
      <button class="attachment-btn" data-type="video">
        <i class="fas fa-video"></i>
        <span>Video</span>
      </button>
      <button class="attachment-btn" data-type="camera">
        <i class="fas fa-camera"></i>
        <span>Camera</span>
      </button>
      <button class="attachment-btn" data-type="audio">
        <i class="fas fa-headphones"></i>
        <span>Audio</span>
      </button>
      <button class="attachment-btn" data-type="file">
        <i class="fas fa-file"></i>
        <span>File</span>
      </button>
      <button class="attachment-btn" data-type="record-voice">
        <i class="fas fa-microphone"></i>
        <span>Record</span>
      </button>
      <button class="attachment-btn" data-type="doc">
        <i class="fas fa-file-alt"></i>
        <span>Document</span>
      </button>
      <button class="attachment-btn" data-type="location">
        <i class="fas fa-location-dot"></i>
        <span>Location</span>
      </button>
      <button class="attachment-btn" data-type="record-video">
        <i class="fas fa-video"></i>
        <span>Record Video</span>
      </button>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal fade" id="savePeerModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <i class="fas fa-cog me-2"></i>Settings
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <!-- Profile Section -->
          <div class="settings-section">
            <h6 class="section-title">
              <i class="fas fa-user me-2"></i>Profile
            </h6>
            <div class="form-group">
              <label for="peerNameToSave" class="form-label">Your Name</label>
              <input type="text" id="peerNameToSave" class="form-control" maxlength="20" placeholder="Enter your name">
            </div>
            <div class="form-group">
              <label for="peerIdToSave" class="form-label">Peer ID</label>
              <input type="text" id="peerIdToSave" class="form-control" maxlength="100" placeholder="Enter Peer ID">
            </div>
            <div id="save-peer-alert" class="alert alert-warning d-none">
              <i class="fas fa-exclamation-triangle me-2"></i>
              Notification permission denied. Required for join alerts.
            </div>
          </div>

          <!-- STUN Servers Section -->
          <div class="settings-section">
            <div class="d-flex justify-content-between align-items-center">
              <h6 class="section-title mb-0">
                <i class="fas fa-server me-2"></i>STUN Servers
                <span class="text-success" id="stunSaveStatus"></span>
              </h6>
              <button class="btn btn-sm btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#stunServerCollapse">
                <i id="stunToggleIcon" class="fas fa-chevron-down"></i>
              </button>
            </div>
            
            <div id="stunServerCollapse" class="collapse">
              <div class="stun-servers">
                <div class="form-check">
                  <input class="form-check-input stun-option" type="checkbox" value="stun:global.stun.twilio.com:3478" id="stun1">
                  <label class="form-check-label" for="stun1">Twilio STUN (Fast)</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input stun-option" type="checkbox" value="stun:stun.l.google.com:19302" id="stun2">
                  <label class="form-check-label" for="stun2">Google STUN 1</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input stun-option" type="checkbox" value="stun:stun1.l.google.com:19302" id="stun3">
                  <label class="form-check-label" for="stun3">Google STUN 2</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input stun-option" type="checkbox" value="stun:stun2.l.google.com:19302" id="stun4">
                  <label class="form-check-label" for="stun4">Google STUN 3</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input stun-option" type="checkbox" value="stun:stun3.l.google.com:19302" id="stun5">
                  <label class="form-check-label" for="stun5">Google STUN 4</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input stun-option" type="checkbox" value="stun:stun4.l.google.com:19302" id="stun6">
                  <label class="form-check-label" for="stun6">Google STUN 5</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input stun-option" type="checkbox" value="stun:stun.stunprotocol.org:3478" id="stun7">
                  <label class="form-check-label" for="stun7">STUN Protocol</label>
                </div>
              </div>
            </div>
            <div id="stun-error" class="alert alert-danger d-none">
              <i class="fas fa-exclamation-circle me-2"></i>
              Please select at least 1 STUN server.
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button class="btn btn-primary" id="confirmSavePeerBtn">Save Settings</button>
        </div>
      </div>
    </div>
  </div>

  <!-- AI Settings Modal -->
  <div class="modal fade" id="settingAi" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <i class="fas fa-robot me-2"></i>AI Assistant Settings
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="geminiApiKey" class="form-label">Gemini API Key</label>
            <input type="text" class="form-control" id="geminiApiKey" placeholder="Enter your Gemini API key">
            <small class="form-text text-muted">Get your API key from Google AI Studio</small>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button class="btn btn-primary" id="saveGeminiKeyBtn">
            <i class="fas fa-save me-2"></i>Save Key
          </button>
        </div>
      </div>
    </div>
  </div>


<!-- Voice Recording Modal -->
<div id="voiceRecordingModal" class="modal fade" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark text-white text-center">
      <div class="modal-header border-0">
        <h5 class="modal-title w-100"><i class="fas fa-microphone-alt"></i> Recording Voice</h5>
      </div>
      <div class="modal-body">
        <div class="fs-1 fw-bold" id="voiceRecordingTimer">00:00</div>
        <p class="small text-muted">Tap stop to finish</p>
      </div>
      <div class="modal-footer border-0 justify-content-center">
        <button type="button" class="btn btn-danger" id="stopVoiceRecordingBtn">
          <i class="fas fa-stop"></i> Stop
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Video Recording Modal -->
<div id="videoRecordingModal" class="modal fade" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content bg-dark text-white text-center">
      <div class="modal-header border-0">
        <h5 class="modal-title w-100"><i class="fas fa-video"></i> Recording Video</h5>
      </div>
      <div class="modal-body">
        <video id="videoPreview" autoplay muted playsinline style="max-width: 100%; border-radius: 10px;"></video>
        <div class="fs-5 mt-2" id="videoRecordingTimer">00:00</div>
      </div>
      <div class="modal-footer border-0 justify-content-center">
        <button type="button" class="btn btn-danger" id="stopVideoRecordingBtn">
          <i class="fas fa-stop"></i> Stop
        </button>
        <button type="button" class="btn btn-secondary me-2" id="switchCameraBtn">
          <i class="fas fa-sync-alt"></i> Switch Camera
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Location Sharing Modal -->
<div id="locationModal" class="modal fade" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header custom-bg text-white">
        <h5 class="modal-title"><i class="fas fa-location-dot me-2"></i> Share Location</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-2">
        <div class="input-group mb-2">
          <input type="text" id="location-search" class="form-control" placeholder="Search a location...">
          <button class="btn btn-outline-secondary" type="button" id="btnSearchLocation">
            <i class="fas fa-search"></i>
          </button>
        </div>
        <div id="map" style="height: 300px; border-radius: 10px;"></div>
        <div class="d-flex justify-content-end mt-3 gap-2">
          <button class="btn btn-outline-secondary" id="btnCurrentLocation"><i class="fas fa-crosshairs"></i> Current</button>
          <button class="btn btn-primary" id="btnSendLocation"><i class="fas fa-paper-plane"></i> Send</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Auto Join Prompt Modal -->
<div class="modal fade" id="autoJoinModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Incoming Connection Request</h5>
      </div>
      <div class="modal-body">
        <p id="autoJoinMessage" class="mb-0"></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button class="btn btn-sm custom-bg text-white" id="autoJoinConfirmBtn">Join</button>
      </div>
    </div>
  </div>
</div>

<!-- Image Preview Modal -->
<div id="imagePreviewModal" class="image-preview-modal d-none">
  <div class="image-preview-container">
    <div class="image-preview-filename" id="imagePreviewFilename"></div>
    <button class="image-preview-close" id="imagePreviewClose">
      <i class="fas fa-times"></i>
    </button>
    <img id="imagePreviewImg" class="image-preview-img" alt="Preview">
    <div class="image-preview-download mt-3">
      <button id="imagePreviewDownload" class="btn btn-outline-light btn-sm">
        <i class="fas fa-download me-2"></i>Download Image
      </button>
    </div>
  </div>
</div>



  <!-- AI Assistant Button -->
  <button id="ai-btn" class="ai-assistant-btn">
    <i class="fas fa-robot"></i>
  </button>


  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/wavesurfer.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.polyfilled.min.js"></script>
  <script src="script.js"></script>
  <script src="main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var fileInput = document.getElementById('chat-file');
      var chooseBtn = document.getElementById('btn-choose-file');
      var clearBtn = document.getElementById('clear-file');
      var fileName = document.getElementById('selected-file-name');

      if (!fileInput || !chooseBtn || !fileName) return;

      chooseBtn.addEventListener('click', function () {
        fileInput.click();
      });

      fileInput.addEventListener('change', function () {
        if (fileInput.files && fileInput.files.length > 0) {
          fileName.textContent = fileInput.files[0].name;
          if (clearBtn) clearBtn.classList.remove('d-none');
        } else {
          fileName.textContent = 'No file selected';
          if (clearBtn) clearBtn.classList.add('d-none');
        }
      });

      if (clearBtn) {
        clearBtn.addEventListener('click', function () {
          fileInput.value = '';
          fileInput.dispatchEvent(new Event('change'));
        });
      }
    });
  </script>
</body>
</html>