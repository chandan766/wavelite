const _0x21b7d7=_0x455d;(function(_0xad751d,_0x1f0906){const _0x2a9c39=_0x455d,_0xf17f8=_0xad751d();while(!![]){try{const _0x5434c6=-parseInt(_0x2a9c39(0xce))/0x1+parseInt(_0x2a9c39(0xc3))/0x2*(-parseInt(_0x2a9c39(0x14e))/0x3)+parseInt(_0x2a9c39(0xda))/0x4*(parseInt(_0x2a9c39(0xbd))/0x5)+parseInt(_0x2a9c39(0x99))/0x6*(parseInt(_0x2a9c39(0x182))/0x7)+-parseInt(_0x2a9c39(0x127))/0x8+-parseInt(_0x2a9c39(0x11c))/0x9+parseInt(_0x2a9c39(0x17a))/0xa*(parseInt(_0x2a9c39(0xd2))/0xb);if(_0x5434c6===_0x1f0906)break;else _0xf17f8['push'](_0xf17f8['shift']());}catch(_0x5616d0){_0xf17f8['push'](_0xf17f8['shift']());}}}(_0x226e,0x99267));const FORM_URL=_0x21b7d7(0x125),SHEET_URL=_0x21b7d7(0x105),DELETE_URL='https://script.google.com/macros/s/AKfycbyNUCRo3JKNk_bVq9VcdpbICGuBiTytBGRAjFr7VDrHVvG6TMxaA195sBSSBOeiR1DG/exec';let localConnection,dataChannel,pollingInterval,isManuallyConnecting=![],peerId=null;const CONNECTION_TIMEOUT=0x1d4c0,CHUNK_TIMEOUT=0x7530,MAX_RETRIES=0x5,CHUNK_SIZE=0x10000,BUFFER_THRESHOLD=0x40000;let fileReader=new FileReader(),currentFile=null,currentChunk=0x0,totalChunks=0x0,retryCounts=new Map(),activeTransfers=new Map(),receivedFileInfo=null;$(document)[_0x21b7d7(0x152)](()=>{const _0x4c24df=_0x21b7d7;$(_0x4c24df(0x11f))[_0x4c24df(0x190)](async function(_0x24ac0e){const _0x16ec3b=_0x4c24df;_0x24ac0e['preventDefault'](),isManuallyConnecting=!![];var _0x1dfc8a=$(_0x16ec3b(0x179))['val']()['trim']();peerId=$(_0x16ec3b(0xf3))[_0x16ec3b(0x10a)]()[_0x16ec3b(0x81)](),$(_0x16ec3b(0x93))[_0x16ec3b(0x177)](''),$(_0x16ec3b(0xcd))['text']('');let _0x5bc3ee=![];!_0x1dfc8a&&(_0x1dfc8a=_0x16ec3b(0x9a));!peerId&&(peerId='peer123');if(_0x5bc3ee)return;$('#peerIdSubmit')[_0x16ec3b(0x12a)]('disabled',!![])[_0x16ec3b(0x177)](_0x16ec3b(0xb0)),$(_0x16ec3b(0xde))[_0x16ec3b(0x12a)](_0x16ec3b(0x118),!![])['text'](_0x16ec3b(0x189)),$(_0x16ec3b(0xa3))['val'](peerId),startConnection(peerId);}),$(_0x4c24df(0x86))[_0x4c24df(0xfd)](_0xa721ab=>{const _0x38aa7f=_0x4c24df,_0x5070d8=_0xa721ab[_0x38aa7f(0xc8)][_0x38aa7f(0x18a)][0x0];_0x5070d8?currentFile=_0x5070d8:currentFile=null;}),$(_0x4c24df(0x116))['click'](()=>{const _0xd2ea9b=_0x4c24df;if(!currentFile)$(_0xd2ea9b(0x86))[_0xd2ea9b(0x190)]();else{if(dataChannel&&dataChannel[_0xd2ea9b(0x167)]==='open'){console[_0xd2ea9b(0x102)]('Sending\x20file,\x20dataChannel\x20state:',dataChannel[_0xd2ea9b(0x167)]);const _0x18d64f=$(_0xd2ea9b(0x179))[_0xd2ea9b(0x10a)]()||_0xd2ea9b(0x9a),_0x16def8=Date['now']()['toString']();currentChunk=0x0,totalChunks=Math[_0xd2ea9b(0x17f)](currentFile[_0xd2ea9b(0x158)]/CHUNK_SIZE),activeTransfers[_0xd2ea9b(0x188)](_0x16def8,{'file':currentFile,'fileName':currentFile[_0xd2ea9b(0x142)],'fileSize':currentFile[_0xd2ea9b(0x158)],'fileType':currentFile[_0xd2ea9b(0xe8)]||'application/octet-stream','totalChunks':totalChunks});const _0xcaa613={'type':'file','name':_0x18d64f,'messageId':_0x16def8,'fileName':currentFile[_0xd2ea9b(0x142)],'fileSize':currentFile['size'],'fileType':currentFile['type']||_0xd2ea9b(0xea)};try{dataChannel['send'](JSON['stringify'](_0xcaa613));const _0x35f0f8=URL[_0xd2ea9b(0x161)](currentFile);displayMessage(_0x18d64f,currentFile[_0xd2ea9b(0x142)],!![],_0xd2ea9b(0x171),_0x35f0f8,_0x16def8,_0xd2ea9b(0x13c),_0xcaa613[_0xd2ea9b(0x14f)]),showProgressBar(_0x16def8,!![]),sendFileChunks(_0x16def8);}catch(_0x366d05){console[_0xd2ea9b(0xe2)]('Error\x20sending\x20file:',_0x366d05),hideProgressBar(_0x16def8),activeTransfers['delete'](_0x16def8),alert('Failed\x20to\x20send\x20file.\x20Please\x20try\x20again.');}}else console['warn'](_0xd2ea9b(0x163),dataChannel?dataChannel[_0xd2ea9b(0x167)]:_0xd2ea9b(0xbb)),alert(_0xd2ea9b(0x7d));}}),$(_0x4c24df(0x9d))['click'](function(){const _0x19b191=_0x4c24df;location[_0x19b191(0xf5)]();}),$('#btn-send-text')[_0x4c24df(0x190)](()=>{const _0x35f6a6=_0x4c24df,_0x19f556=$(_0x35f6a6(0x179))[_0x35f6a6(0x10a)]()||'Anonymous',_0x3c8c25=$(_0x35f6a6(0xf6))[_0x35f6a6(0x10a)](),_0x144392=Date[_0x35f6a6(0xb4)]()[_0x35f6a6(0xf7)]();if(_0x3c8c25&&dataChannel&&dataChannel[_0x35f6a6(0x167)]===_0x35f6a6(0x151)){console[_0x35f6a6(0x102)](_0x35f6a6(0x89),dataChannel[_0x35f6a6(0x167)]);try{dataChannel[_0x35f6a6(0x94)](JSON['stringify']({'type':_0x35f6a6(0x177),'name':_0x19f556,'message':_0x3c8c25,'messageId':_0x144392})),displayMessage(_0x19f556,_0x3c8c25,!![],'text',null,_0x144392,_0x35f6a6(0x13c)),$(_0x35f6a6(0xf6))[_0x35f6a6(0x10a)]('');}catch(_0x5755c4){console[_0x35f6a6(0xe2)]('Error\x20sending\x20text\x20message:',_0x5755c4),alert('Failed\x20to\x20send\x20message.\x20Please\x20try\x20again.');}}else console[_0x35f6a6(0x132)]('Cannot\x20send\x20text,\x20dataChannel\x20state:',dataChannel?dataChannel[_0x35f6a6(0x167)]:_0x35f6a6(0xbb)),alert(_0x35f6a6(0x138));}),$(_0x4c24df(0x145))[_0x4c24df(0x190)](()=>{const _0xdf007d=_0x4c24df;fetch(DELETE_URL,{'method':_0xdf007d(0xb7),'body':new URLSearchParams({'peerId':''})})[_0xdf007d(0xa6)](_0x517ea0=>_0x517ea0['text']())[_0xdf007d(0xa6)](_0x90f4c9=>alert(_0xdf007d(0xd3),_0x90f4c9))[_0xdf007d(0xd5)](_0xd65c76=>alert(_0xdf007d(0xd7),_0xd65c76));}),$(_0x4c24df(0xde))['click'](async function(_0x4ed675){const _0x4e2db0=_0x4c24df;_0x4ed675[_0x4e2db0(0x12c)](),isManuallyConnecting=!![];const _0x1fa5ab=$('#chat-username')[_0x4e2db0(0x10a)]()[_0x4e2db0(0x81)]();peerId=$(_0x4e2db0(0xf3))[_0x4e2db0(0x10a)]()[_0x4e2db0(0x81)](),$('#name-error')[_0x4e2db0(0x177)](''),$(_0x4e2db0(0xcd))['text']('');let _0x1eb6a8=![];!_0x1fa5ab&&($(_0x4e2db0(0x93))[_0x4e2db0(0x177)]('Name\x20is\x20required'),_0x1eb6a8=!![]);!peerId&&($('#peer-error')[_0x4e2db0(0x177)](_0x4e2db0(0xf8)),_0x1eb6a8=!![]);if(_0x1eb6a8)return;$(_0x4e2db0(0xde))[_0x4e2db0(0x12a)]('disabled',!![])[_0x4e2db0(0x177)](_0x4e2db0(0x112)),$(_0x4e2db0(0x11f))[_0x4e2db0(0x12a)](_0x4e2db0(0x118),!![])[_0x4e2db0(0x177)]('Connect'),$('#peerId')[_0x4e2db0(0x10a)](peerId),startJoinConnection(peerId);}),$(_0x4c24df(0x135))[_0x4c24df(0x190)](async()=>{const _0x97bd0d=_0x4c24df,_0x52a0ce=$(_0x97bd0d(0xb6))['val']()[_0x97bd0d(0x81)](),_0x4f157a=$(_0x97bd0d(0x10c))[_0x97bd0d(0x10a)]()[_0x97bd0d(0x81)](),_0x1c9640=$(_0x97bd0d(0x12e));_0x1c9640['addClass'](_0x97bd0d(0xc9))[_0x97bd0d(0x177)]('');if(!_0x52a0ce||!_0x4f157a){_0x1c9640[_0x97bd0d(0x177)](_0x97bd0d(0x136))[_0x97bd0d(0x13b)](_0x97bd0d(0xc9));return;}const _0x45e024=await Notification['requestPermission']();if(_0x45e024!=='granted'){_0x1c9640['text'](_0x97bd0d(0xd9))[_0x97bd0d(0x13b)](_0x97bd0d(0xc9));return;}localStorage['setItem'](_0x97bd0d(0x16d),_0x52a0ce),localStorage['setItem'](_0x97bd0d(0x8f),_0x4f157a),alert(_0x97bd0d(0x194)+_0x52a0ce+'\x22\x20saved\x20for\x20notifications.'),$('#savePeerModal')[_0x97bd0d(0x91)]('hide');}),$(_0x4c24df(0x14d))[_0x4c24df(0x190)](function(){const _0x40b1fa=_0x4c24df,_0x44c236=localStorage[_0x40b1fa(0x13f)](_0x40b1fa(0x16d))||'',_0x50901e=localStorage['getItem']('peerName')||'';_0x44c236&&($(_0x40b1fa(0xb6))[_0x40b1fa(0x10a)](_0x44c236),$(_0x40b1fa(0x10c))[_0x40b1fa(0x10a)](_0x50901e)),loadStunSettings();}),$(document)['on'](_0x4c24df(0xfd),_0x4c24df(0xdd),()=>{const _0xa1a22a=_0x4c24df,_0x1862f4=$('.stun-option:checked')[_0xa1a22a(0x185)](function(){const _0x2870eb=_0xa1a22a;return this[_0x2870eb(0xbf)];})[_0xa1a22a(0x162)]();_0x1862f4['length']<0x2?$(_0xa1a22a(0x147))[_0xa1a22a(0x13b)](_0xa1a22a(0xc9)):($(_0xa1a22a(0x147))['addClass'](_0xa1a22a(0xc9)),localStorage[_0xa1a22a(0x18f)](_0xa1a22a(0xdb),JSON[_0xa1a22a(0x198)](_0x1862f4)),$(_0xa1a22a(0x123))[_0xa1a22a(0x177)](_0xa1a22a(0x9e)),setTimeout(()=>{$('#stunSaveStatus')['text']('');},0xbb8));});let _0x2d1c07=![],_0x1ca409=setInterval(async()=>{const _0x19947a=_0x4c24df;if(isManuallyConnecting||_0x2d1c07)return;const _0x58fb00=localStorage[_0x19947a(0x13f)](_0x19947a(0x16d))||_0x19947a(0x95),_0x2a0a79=localStorage[_0x19947a(0x13f)](_0x19947a(0x8f))||_0x19947a(0x9a);if(!_0x58fb00)return;const _0x4a0940=await fetchSDP(_0x58fb00,_0x19947a(0x154));if(_0x4a0940){if(Notification[_0x19947a(0x92)]===_0x19947a(0xbe)&&document[_0x19947a(0x17b)]!=='visible'){const _0x23198a=new Notification(_0x19947a(0x7b),{'body':_0x19947a(0x16f)+_0x58fb00+_0x19947a(0x169),'icon':_0x19947a(0xf9)});_0x23198a[_0x19947a(0xe9)]=function(_0x31f140){const _0x4c0408=_0x19947a;_0x31f140[_0x4c0408(0x12c)](),window[_0x4c0408(0xe4)](),$('#autoJoinMessage')[_0x4c0408(0x177)](_0x4c0408(0x16f)+_0x58fb00+_0x4c0408(0x119));const _0x30d85a=new bootstrap[(_0x4c0408(0x157))](document[_0x4c0408(0xa5)]('autoJoinModal'));_0x30d85a[_0x4c0408(0x110)](),$(_0x4c0408(0xa4))[_0x4c0408(0xfc)](_0x4c0408(0x190))['on'](_0x4c0408(0x190),()=>{const _0x46e73f=_0x4c0408;_0x30d85a[_0x46e73f(0x14b)](),setTimeout(()=>{const _0x5f4ab8=_0x46e73f;isManuallyConnecting=!![],$(_0x5f4ab8(0xf3))[_0x5f4ab8(0x10a)](_0x58fb00),$(_0x5f4ab8(0x179))[_0x5f4ab8(0x10a)](_0x2a0a79),$(_0x5f4ab8(0xde))['click']();},0x12c);});};}else Notification['permission']!=='denied'&&Notification[_0x19947a(0x10b)]()['then'](_0x5c0767=>{const _0x1f242a=_0x19947a;_0x5c0767===_0x1f242a(0xbe)&&document[_0x1f242a(0x17b)]!==_0x1f242a(0xd8)&&new Notification(_0x1f242a(0x7b),{'body':_0x1f242a(0x16f)+_0x58fb00+_0x1f242a(0x169),'icon':_0x1f242a(0xf9)});});_0x2d1c07=!![];if(document[_0x19947a(0x17b)]===_0x19947a(0xd8)){$(_0x19947a(0x106))[_0x19947a(0x177)]('Peer\x20\x22'+_0x58fb00+'\x22\x20is\x20requesting\x20to\x20connect.\x20Do\x20you\x20want\x20to\x20join?');const _0x3d454d=new bootstrap[(_0x19947a(0x157))](document[_0x19947a(0xa5)](_0x19947a(0x146)));_0x3d454d[_0x19947a(0x110)](),$(_0x19947a(0xa4))[_0x19947a(0xfc)](_0x19947a(0x190))['on'](_0x19947a(0x190),()=>{const _0x5b915c=_0x19947a;_0x3d454d[_0x5b915c(0x14b)](),setTimeout(()=>{const _0x1f952c=_0x5b915c;isManuallyConnecting=!![],$(_0x1f952c(0xf3))[_0x1f952c(0x10a)](_0x58fb00),$(_0x1f952c(0x179))['val'](_0x2a0a79),$(_0x1f952c(0xde))[_0x1f952c(0x190)]();},0x12c);});}return;}},0xbb8);});function _0x226e(){const _0x582ad6=['❌\x20Failed\x20to\x20set\x20remote\x20description\x20(answer):','</span>','#peerIdSubmit','localDescription','Failed\x20to\x20join\x20connection.\x20Please\x20try\x20again.','Error\x20setting\x20up\x20offerer:','#stunSaveStatus','onload','https://docs.google.com/forms/u/0/d/e/1FAIpQLSej8F-WqVXrneoK1caUwagNb8EbcsLG7c2IWbgzlGIxd7xYAQ/formResponse','Requesting\x20resend\x20for\x20','3901024UmhOFN','\x20px-3\x22\x20id=\x22progress-','css','prop','iceConnectionState','preventDefault','stun:stun.l.google.com:19302','#save-peer-alert','entry.443244439',',\x20size:\x20',',\x20total\x20bytes:\x20','warn','\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22file-name\x20mt-2\x22\x20style=\x22font-size:\x2014px;\x20font-weight:\x20500;\x22>','.progress-percentage','#confirmSavePeerBtn','Peer\x20ID\x20or\x20Name\x20cannot\x20be\x20empty','</div>','Please\x20wait\x20until\x20the\x20connection\x20is\x20established\x20before\x20sending\x20a\x20message.','removeEventListener','Data\x20channel\x20error\x20occurred.\x20Please\x20reconnect\x20and\x20try\x20again.','removeClass','sent','onerror','\x20bytes),\x20retrying\x20for\x20messageId:\x20','getItem','✅\x20Local\x20answer\x20set\x20successfully','ICE\x20connection\x20state:','name','onopen','Starting\x20join\x20connection\x20for\x20peerId:\x20','#delete-all-btn','autoJoinModal','#stun-error','toLocaleTimeString','<a\x20href=\x22','ICE\x20Gathering...','hide','\x20for\x20messageId:\x20','#settingBtn','1101IBtBfc','fileType','❌\x20Error\x20setting\x20up\x20answerer:','open','ready','self','offer',',\x20reconstructing\x20file','No\x20offer\x20SDP\x20found\x20yet\x20for\x20peerId:\x20','Modal','size','\x20.progress-bar','#login-section','Sent\x20file\x20chunk\x20','result','\x22\x20download=\x22','aria-valuenow','delete','Submitting\x20Offer...','createObjectURL','get','Cannot\x20send\x20file,\x20dataChannel\x20state:','FileReader\x20error\x20for\x20messageId:','\x22\x20alt=\x22','Creating\x20answer...','readyState','Deleted\x20SDP\x20for\x20peerId:','\x22\x20is\x20requesting\x20to\x20connect.','Offer\x20Submitted','attr',',\x20chunk:\x20','peerIds','\x20bytes),\x20waiting\x20for\x20messageId:\x20','Peer\x20\x22','hasClass','file','push','Failed\x20to\x20send\x20file\x20chunk.\x20Please\x20try\x20again.','Connect','Connected','length','text','Failed\x20to\x20read\x20file\x20chunk.\x20Please\x20try\x20again.','#chat-username','13338570zXZDcD','visibilityState','includes','Starting\x20connection\x20for\x20peerId:\x20','messageId','ceil','createAnswer','peerId\x20is\x20undefined\x20in\x20setupDataChannel','1855bIeCOG','Failed\x20to\x20display\x20message\x20in\x20UI.\x20Please\x20refresh\x20the\x20page.','No\x20offer\x20found,\x20acting\x20as\x20offerer','map','readAsArrayBuffer','chunkIndex','set','Join','files','\x20after\x20','Offer\x20SDP\x20found\x20for\x20peerId:\x20','message','complete','setItem','click',':\x20File\x20or\x20chunk\x20out\x20of\x20range','Buffer\x20full\x20during\x20resend\x20(','Disconnect','Peer\x20ID\x20\x22','\x20SDP\x20for\x20peerId:\x20','\x20SDP:','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-meta\x20d-flex\x20justify-content-end\x20border-top\x20border-secondary\x20mt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22timestamp\x20text-end\x22\x20style=\x22font-size:10px;\x22>','stringify','Wavelite','Failed\x20to\x20receive\x20all\x20chunks\x20for\x20','Please\x20wait\x20until\x20the\x20connection\x20is\x20established\x20before\x20sending\x20a\x20file.','reduce','Submitted\x20','byteLength','trim','Unknown\x20File','Error\x20submitting\x20','Connection\x20timed\x20out.\x20Please\x20try\x20again\x20or\x20check\x20peer\x20ID.','none','#media-input','chat','image/','Sending\x20text\x20message,\x20dataChannel\x20state:','delivered','min','\x20px-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message\x20py-1\x22\x20style=\x22font-size:12px;font-weight:450;\x22>','Parsing\x20and\x20setting\x20remote\x20offer...','Failed\x20to\x20fetch\x20','peerName','setRemoteDescription','modal','permission','#name-error','send','peer123','other','parse','ondatachannel','612FAAOLc','Anonymous','#chat-display','resend_request','#reloadBtn','\x20Saved!\x20','\x22\x20class=\x22img-fluid\x20rounded\x20mt-2\x22\x20style=\x22width:\x20100%;\x20height:\x20auto;\x20object-fit:\x20contain;\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<br>','✅\x20Remote\x20description\x20(offer)\x20set\x20successfully','no-cors',',\x20expected:\x20','#peerId','#autoJoinConfirmBtn','getElementById','then','<div\x20class=\x22file-name\x22\x20style=\x22font-size:\x2013px;\x20font-weight:\x20500;\x22>','oniceconnectionstatechange','append','scrollHeight','media-input','icegatheringstatechange','Failed\x20to\x20reconstruct\x20received\x20file.\x20Please\x20try\x20again.','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22chat-message\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','Connecting...','scrollTop','<audio\x20controls\x20src=\x22','fileSize','now','2-digit','#peerIdToSave','POST','startsWith','checked','Received\x20file\x20chunk\x20','undefined','#progress-','5atvZlk','granted','value','Received\x20file\x20metadata\x20for\x20','\x20retries.\x20Please\x20try\x20again.','\x20for\x20','270wHVAsY','answer',',\x20type:\x20','width','Answer\x20SDP\x20found\x20for\x20peerId:\x20','target','d-none','Error\x20displaying\x20message\x20for\x20','Received\x20resend\x20request\x20for\x20messageId:\x20','video/','#peer-error','560918mtNvxt','substring','Offer\x20found,\x20acting\x20as\x20answerer','All\x20chunks\x20received\x20for\x20','11PXbFgJ','Deleted\x20all\x20SDP\x20entries:',',\x20proceeding\x20as\x20answerer','catch','Error\x20sending\x20file\x20chunk\x20for\x20messageId:','Error\x20deleting\x20SDP\x20entries:','visible','Notification\x20permission\x20denied.\x20Cannot\x20save\x20Peer\x20ID.','3667996UPufqX','selectedStunServers','setLocalDescription','.stun-option','#joinPeer','\x20for\x20messageId\x20','addEventListener',',\x20received:\x20','error','data','focus','entry.479288741','totalChunks','<span\x20class=\x22status-icon\x20text-muted\x20ms-2\x22><i\x20class=\x22fas\x20fa-check-double\x22></i></span>','type','onclick','application/octet-stream','find','Error\x20resending\x20file\x20chunk\x20','No\x20offer\x20found.\x20Please\x20try\x20again\x20or\x20check\x20peer\x20ID.','Error\x20during\x20join\x20connection:','slice','\x0a\x20\x20\x20\x20<div\x20class=\x22chat-message\x20','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22image-wrapper\x22\x20style=\x22max-width:\x20100%;\x20overflow:\x20hidden;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','table','#peer-id','Displayed\x20message\x20for\x20','reload','#chat-message','toString','Peer\x20ID\x20is\x20required','/logo.png','\x22\x20class=\x22mt-2\x22\x20style=\x22width:\x20100%;\x20max-width:\x20300px;\x22></audio><br>','createOffer','off','change','Max\x20retries\x20reached\x20for\x20','peerId','bufferedAmount','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress\x20mt-2\x22\x20style=\x22height:\x2030px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22progress-bar\x20progress-bar-striped\x20progress-bar-animated\x20bg-info\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20role=\x22progressbar\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x200%;\x20font-size:\x2016px;\x20line-height:\x2030px;\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20aria-valuenow=\x220\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20aria-valuemin=\x220\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20aria-valuemax=\x22100\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22progress-percentage\x22>0%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20','log','Submitting\x20answer\x20SDP\x20for\x20peerId:\x20','peerId\x20is\x20undefined\x20in\x20deletePeerFromSheet','https://docs.google.com/spreadsheets/d/1oQ7TEJLutMpXo4gi75jTOmlBGPBHlF3ekE0mtA3nK_M/gviz/tq?tqx=out:json','#autoJoinMessage','remove','iceGatheringState','Offer\x20Creating...','val','requestPermission','#peerNameToSave','Error\x20reconstructing\x20file\x20','stun:stun1.l.google.com:19302','addClass','show','fileName','Joining...','channel','.\x20Please\x20reconnect\x20and\x20try\x20again.','\x22\x20class=\x22btn\x20btn-sm\x20btn-secondary\x20ms-1\x22><i\x20class=\x22fas\x20fa-download\x22></i></a>','#btn-send-media','audio/','disabled','\x22\x20is\x20requesting\x20to\x20connect.\x20Do\x20you\x20want\x20to\x20join?','✅\x20Remote\x20description\x20(answer)\x20set\x20successfully','Waiting\x20for\x20peer...','4972428ZrzaBv'];_0x226e=function(){return _0x582ad6;};return _0x226e();}async function startConnection(_0x256584){const _0x23f879=_0x21b7d7;console[_0x23f879(0x102)](_0x23f879(0x17d)+_0x256584);const _0x3485bf=await fetchSDP(_0x256584,_0x23f879(0x154));_0x3485bf?(console['log'](_0x23f879(0xd0)),await setupAnswerer(_0x3485bf)):(console[_0x23f879(0x102)](_0x23f879(0x184)),await setupOfferer(_0x256584));}async function setupOfferer(_0x33aa1b){const _0xd56b4a=_0x21b7d7;localConnection=createPeerConnection(),dataChannel=localConnection['createDataChannel'](_0xd56b4a(0x87)),setupDataChannel(),$(_0xd56b4a(0x11f))[_0xd56b4a(0x177)](_0xd56b4a(0x109));try{const _0x562244=await localConnection[_0xd56b4a(0xfb)]();await localConnection[_0xd56b4a(0xdc)](_0x562244),await waitForIceGathering(localConnection),console[_0xd56b4a(0x102)]('Submitting\x20offer\x20SDP\x20for\x20peerId:\x20'+_0x33aa1b),await submitSDP(_0x33aa1b,_0xd56b4a(0x154),JSON[_0xd56b4a(0x198)](localConnection[_0xd56b4a(0x120)])),$(_0xd56b4a(0x11f))[_0xd56b4a(0x177)](_0xd56b4a(0x11b));let _0x5911a6=Date[_0xd56b4a(0xb4)]();pollingInterval=setInterval(async()=>{const _0x341983=_0xd56b4a;if(Date['now']()-_0x5911a6>CONNECTION_TIMEOUT){clearInterval(pollingInterval),$('#peerIdSubmit')[_0x341983(0x12a)]('disabled',![])[_0x341983(0x177)](_0x341983(0x174)),$(_0x341983(0xde))[_0x341983(0x12a)]('disabled',![])['text']('Join'),alert(_0x341983(0x84));return;}const _0x3431cc=await fetchSDP(_0x33aa1b,_0x341983(0xc4));if(_0x3431cc){console[_0x341983(0x102)](_0x341983(0xc7)+_0x33aa1b),clearInterval(pollingInterval);try{const _0x5b7db9=JSON['parse'](_0x3431cc['sdp']);await localConnection['setRemoteDescription'](new RTCSessionDescription(_0x5b7db9)),console[_0x341983(0x102)](_0x341983(0x11a));}catch(_0xca0550){console[_0x341983(0xe2)](_0x341983(0x11d),_0xca0550);}}},0x1388);}catch(_0x557d83){console['error'](_0xd56b4a(0x122),_0x557d83),$('#peerIdSubmit')[_0xd56b4a(0x12a)](_0xd56b4a(0x118),![])[_0xd56b4a(0x177)](_0xd56b4a(0x174)),$(_0xd56b4a(0xde))[_0xd56b4a(0x12a)](_0xd56b4a(0x118),![])['text'](_0xd56b4a(0x189)),alert('Failed\x20to\x20establish\x20connection.\x20Please\x20try\x20again.');}}function _0x455d(_0x2b5f85,_0x5669fa){const _0x226e46=_0x226e();return _0x455d=function(_0x455d76,_0x578ceb){_0x455d76=_0x455d76-0x7b;let _0x2b12a6=_0x226e46[_0x455d76];return _0x2b12a6;},_0x455d(_0x2b5f85,_0x5669fa);}async function setupAnswerer(_0x41b2df){const _0x32d6d7=_0x21b7d7;localConnection=createPeerConnection(),localConnection[_0x32d6d7(0x98)]=_0x19b1b6=>{const _0x33fb0b=_0x32d6d7;dataChannel=_0x19b1b6[_0x33fb0b(0x113)],setupDataChannel();};try{console[_0x32d6d7(0x102)](_0x32d6d7(0x8d));const _0xe43503=JSON[_0x32d6d7(0x97)](_0x41b2df['sdp']);await localConnection[_0x32d6d7(0x90)](new RTCSessionDescription(_0xe43503)),console[_0x32d6d7(0x102)](_0x32d6d7(0xa0)),console[_0x32d6d7(0x102)](_0x32d6d7(0x166));const _0x12b765=await localConnection[_0x32d6d7(0x180)]();await localConnection[_0x32d6d7(0xdc)](_0x12b765),console[_0x32d6d7(0x102)](_0x32d6d7(0x140)),await waitForIceGathering(localConnection),console['log'](_0x32d6d7(0x103)+_0x41b2df[_0x32d6d7(0xff)]),await submitSDP(_0x41b2df[_0x32d6d7(0xff)],_0x32d6d7(0xc4),JSON[_0x32d6d7(0x198)](localConnection['localDescription']));}catch(_0x222cc9){console[_0x32d6d7(0xe2)](_0x32d6d7(0x150),_0x222cc9),$(_0x32d6d7(0x11f))['prop'](_0x32d6d7(0x118),![])[_0x32d6d7(0x177)](_0x32d6d7(0x174)),$(_0x32d6d7(0xde))[_0x32d6d7(0x12a)](_0x32d6d7(0x118),![])['text'](_0x32d6d7(0x189)),alert('Failed\x20to\x20establish\x20connection.\x20Please\x20try\x20again.');}}function createPeerConnection(){const _0x388a96=_0x21b7d7,_0x5503d6=JSON[_0x388a96(0x97)](localStorage[_0x388a96(0x13f)](_0x388a96(0xdb))||'[]'),_0x29b436=_0x5503d6[_0x388a96(0x176)]>=0x2?_0x5503d6:[_0x388a96(0x12d),_0x388a96(0x10e)],_0x49ef62=new RTCPeerConnection({'iceServers':_0x29b436[_0x388a96(0x185)](_0x1c72e9=>({'urls':_0x1c72e9})),'iceCandidatePoolSize':0x0});return _0x49ef62[_0x388a96(0xa8)]=()=>{const _0x130d18=_0x388a96;console['log'](_0x130d18(0x141),_0x49ef62[_0x130d18(0x12b)]);},_0x49ef62;}function waitForIceGathering(_0x388cdc){const _0x190a51=_0x21b7d7;return $('#peerIdSubmit')[_0x190a51(0x177)](_0x190a51(0x14a)),new Promise(_0x2f66e2=>{const _0x3f7bb7=_0x190a51;if(_0x388cdc[_0x3f7bb7(0x108)]==='complete')return _0x2f66e2();const _0x3362c0=()=>{const _0x21358e=_0x3f7bb7;_0x388cdc['iceGatheringState']===_0x21358e(0x18e)&&(_0x388cdc[_0x21358e(0x139)]('icegatheringstatechange',_0x3362c0),_0x2f66e2());};_0x388cdc[_0x3f7bb7(0xe0)](_0x3f7bb7(0xac),_0x3362c0);});}async function submitSDP(_0x5b4fda,_0x54793f,_0x434048){const _0x5b925a=_0x21b7d7;$('#peerIdSubmit')['text'](_0x5b925a(0x160));const _0x4a3322=new FormData();_0x4a3322[_0x5b925a(0xa9)]('entry.1244760702',_0x5b4fda),_0x4a3322[_0x5b925a(0xa9)](_0x5b925a(0x12f),_0x54793f),_0x4a3322[_0x5b925a(0xa9)](_0x5b925a(0xe5),_0x434048);try{await fetch(FORM_URL,{'method':_0x5b925a(0xb7),'mode':_0x5b925a(0xa1),'body':_0x4a3322}),console[_0x5b925a(0x102)](_0x5b925a(0x7f)+_0x54793f+_0x5b925a(0x195)+_0x5b4fda),$(_0x5b925a(0x11f))[_0x5b925a(0x177)](_0x5b925a(0x16a));}catch(_0x638cab){console[_0x5b925a(0xe2)](_0x5b925a(0x83)+_0x54793f+_0x5b925a(0x196),_0x638cab);throw _0x638cab;}}async function fetchSDP(_0x585f95,_0x446cde){const _0x1f1e08=_0x21b7d7;try{const _0x23fe9c=await fetch(SHEET_URL),_0x40607d=await _0x23fe9c[_0x1f1e08(0x177)](),_0x50f4db=JSON[_0x1f1e08(0x97)](_0x40607d[_0x1f1e08(0xcf)](0x2f)[_0x1f1e08(0xef)](0x0,-0x2)),_0xcb0cfa=_0x50f4db[_0x1f1e08(0xf2)]['rows'];for(let _0x246cfb of _0xcb0cfa){const _0x57e27f=_0x246cfb['c'][0x1]?.['v'],_0x508239=_0x246cfb['c'][0x2]?.['v'],_0xe0af05=_0x246cfb['c'][0x3]?.['v'];if(_0x57e27f==_0x585f95&&_0x508239==_0x446cde&&_0xe0af05)return console[_0x1f1e08(0x102)]('Found\x20'+_0x446cde+_0x1f1e08(0x195)+_0x57e27f),{'peerId':_0x57e27f,'role':_0x508239,'sdp':_0xe0af05};}return console[_0x1f1e08(0x102)]('No\x20'+_0x446cde+'\x20SDP\x20found\x20for\x20peerId:\x20'+_0x585f95),null;}catch(_0x3bf092){return console[_0x1f1e08(0xe2)](_0x1f1e08(0x8e)+_0x446cde+_0x1f1e08(0x195)+_0x585f95+':',_0x3bf092),null;}}function setupDataChannel(){const _0x40b9c5=_0x21b7d7;let _0x4e74c2=[],_0x1173a6=null,_0x1357d7=null,_0x3c8b24=0x0;if(!peerId){console[_0x40b9c5(0xe2)](_0x40b9c5(0x181));return;}dataChannel[_0x40b9c5(0x143)]=()=>{const _0x1bd45b=_0x40b9c5;console[_0x1bd45b(0x102)]('Data\x20channel\x20opened\x20for\x20peerId:',peerId),deletePeerFromSheet(peerId),transitionToChat();},dataChannel['onmessage']=_0x5bcfe5=>{const _0x4974fb=_0x40b9c5;if(_0x5bcfe5[_0x4974fb(0xe3)]instanceof ArrayBuffer){if(receivedFileInfo){_0x4e74c2[_0x4974fb(0x172)](_0x5bcfe5[_0x4974fb(0xe3)]),_0x1173a6=Date[_0x4974fb(0xb4)](),_0x3c8b24++;const _0x2aaee0=_0x4e74c2[_0x4974fb(0x7e)]((_0x139ba6,_0x4ca923)=>_0x139ba6+_0x4ca923[_0x4974fb(0x80)],0x0);console[_0x4974fb(0x102)](_0x4974fb(0xba)+_0x4e74c2['length']+'/'+Math[_0x4974fb(0x17f)](receivedFileInfo['fileSize']/CHUNK_SIZE)+_0x4974fb(0xc2)+receivedFileInfo[_0x4974fb(0x111)]+_0x4974fb(0x131)+_0x2aaee0+_0x4974fb(0xa2)+receivedFileInfo[_0x4974fb(0xb3)]),updateProgressBar(receivedFileInfo[_0x4974fb(0x17e)],_0x2aaee0/receivedFileInfo[_0x4974fb(0xb3)]*0x64);if(_0x2aaee0>=receivedFileInfo[_0x4974fb(0xb3)]){console[_0x4974fb(0x102)](_0x4974fb(0xd1)+receivedFileInfo['fileName']+_0x4974fb(0x155)),clearTimeout(_0x1357d7);try{const _0x21ccee=new Blob(_0x4e74c2,{'type':receivedFileInfo[_0x4974fb(0x14f)]||_0x4974fb(0xea)}),_0x425efa=URL[_0x4974fb(0x161)](_0x21ccee);displayMessage(receivedFileInfo[_0x4974fb(0x142)],receivedFileInfo[_0x4974fb(0x111)],![],_0x4974fb(0x171),_0x425efa,receivedFileInfo['messageId'],'delivered',receivedFileInfo['fileType']),hideProgressBar(receivedFileInfo[_0x4974fb(0x17e)]),_0x4e74c2=[],receivedFileInfo=null,_0x3c8b24=0x0,retryCounts['delete'](receivedFileInfo?.['messageId']);}catch(_0x177af1){console[_0x4974fb(0xe2)](_0x4974fb(0x10d)+receivedFileInfo[_0x4974fb(0x111)]+':',_0x177af1),hideProgressBar(receivedFileInfo[_0x4974fb(0x17e)]),alert(_0x4974fb(0xad)),_0x4e74c2=[],receivedFileInfo=null,_0x3c8b24=0x0,retryCounts[_0x4974fb(0x15f)](receivedFileInfo?.['messageId']);}}else clearTimeout(_0x1357d7),_0x1357d7=setTimeout(()=>{const _0x93fb32=_0x4974fb;if(receivedFileInfo&&_0x2aaee0<receivedFileInfo[_0x93fb32(0xb3)]){const _0x5873d2=retryCounts[_0x93fb32(0x162)](receivedFileInfo['messageId'])||0x0;_0x5873d2<MAX_RETRIES?(console[_0x93fb32(0x102)](_0x93fb32(0x126)+receivedFileInfo[_0x93fb32(0x111)]+_0x93fb32(0xe1)+_0x2aaee0+',\x20expected:\x20'+receivedFileInfo['fileSize']+',\x20chunk:\x20'+_0x3c8b24),retryCounts[_0x93fb32(0x188)](receivedFileInfo['messageId'],_0x5873d2+0x1),dataChannel[_0x93fb32(0x94)](JSON[_0x93fb32(0x198)]({'type':_0x93fb32(0x9c),'messageId':receivedFileInfo['messageId'],'chunkIndex':_0x3c8b24})),_0x1173a6=Date[_0x93fb32(0xb4)]()):(console['error'](_0x93fb32(0xfe)+receivedFileInfo['fileName']+_0x93fb32(0xe1)+_0x2aaee0+_0x93fb32(0xa2)+receivedFileInfo[_0x93fb32(0xb3)]),hideProgressBar(receivedFileInfo['messageId']),alert(_0x93fb32(0x7c)+receivedFileInfo[_0x93fb32(0x111)]+_0x93fb32(0x18b)+MAX_RETRIES+_0x93fb32(0xc1)),_0x4e74c2=[],receivedFileInfo=null,_0x3c8b24=0x0,retryCounts[_0x93fb32(0x15f)](receivedFileInfo[_0x93fb32(0x17e)]));}},CHUNK_TIMEOUT);}}else{const _0x91fc74=JSON[_0x4974fb(0x97)](_0x5bcfe5[_0x4974fb(0xe3)]);if(_0x91fc74[_0x4974fb(0xe8)]===_0x4974fb(0x177))displayMessage(_0x91fc74['name'],_0x91fc74[_0x4974fb(0x18d)],![],_0x4974fb(0x177),null,_0x91fc74['messageId'],_0x4974fb(0x8a));else{if(_0x91fc74[_0x4974fb(0xe8)]===_0x4974fb(0x171))receivedFileInfo={'name':_0x91fc74[_0x4974fb(0x142)],'messageId':_0x91fc74[_0x4974fb(0x17e)],'fileName':_0x91fc74[_0x4974fb(0x111)],'fileSize':_0x91fc74[_0x4974fb(0xb3)],'fileType':_0x91fc74[_0x4974fb(0x14f)]},_0x4e74c2=[],_0x1173a6=Date[_0x4974fb(0xb4)](),_0x3c8b24=0x0,console[_0x4974fb(0x102)](_0x4974fb(0xc0)+_0x91fc74['fileName']+_0x4974fb(0x130)+_0x91fc74[_0x4974fb(0xb3)]+_0x4974fb(0xc5)+_0x91fc74[_0x4974fb(0x14f)]),showProgressBar(_0x91fc74['messageId'],![]);else _0x91fc74['type']===_0x4974fb(0x9c)&&(console[_0x4974fb(0x102)](_0x4974fb(0xcb)+_0x91fc74['messageId']+_0x4974fb(0x16c)+_0x91fc74[_0x4974fb(0x187)]),resendFileChunk(_0x91fc74[_0x4974fb(0x17e)],_0x91fc74[_0x4974fb(0x187)]));}}},dataChannel[_0x40b9c5(0x13d)]=_0x10f5fc=>{const _0x17d3e5=_0x40b9c5;console[_0x17d3e5(0xe2)]('Data\x20channel\x20error:',_0x10f5fc),receivedFileInfo?(hideProgressBar(receivedFileInfo[_0x17d3e5(0x17e)]),alert('Data\x20channel\x20error\x20during\x20transfer\x20of\x20'+receivedFileInfo[_0x17d3e5(0x111)]+_0x17d3e5(0x114)),_0x4e74c2=[],receivedFileInfo=null,_0x3c8b24=0x0,clearTimeout(_0x1357d7),retryCounts[_0x17d3e5(0x15f)](receivedFileInfo[_0x17d3e5(0x17e)])):alert(_0x17d3e5(0x13a));};}function sendFileChunks(_0x5eba53){const _0x344066=_0x21b7d7,_0x24c5c2=activeTransfers[_0x344066(0x162)](_0x5eba53);if(!_0x24c5c2||currentChunk*CHUNK_SIZE>=_0x24c5c2[_0x344066(0xb3)]){console[_0x344066(0x102)]('File\x20sending\x20completed\x20for\x20messageId:',_0x5eba53),$(_0x344066(0x86))['val'](''),document[_0x344066(0xa5)](_0x344066(0xab))[_0x344066(0xbf)]='',currentFile=null,currentChunk=0x0,totalChunks=0x0,hideProgressBar(_0x5eba53),activeTransfers[_0x344066(0x15f)](_0x5eba53),retryCounts[_0x344066(0x15f)](_0x5eba53);return;}if(dataChannel[_0x344066(0x100)]>BUFFER_THRESHOLD){console[_0x344066(0x102)]('Buffer\x20full\x20('+dataChannel[_0x344066(0x100)]+_0x344066(0x16e)+_0x5eba53),setTimeout(()=>sendFileChunks(_0x5eba53),0xc8);return;}const _0x5207c0=currentChunk*CHUNK_SIZE,_0xd019a4=Math[_0x344066(0x8b)](_0x5207c0+CHUNK_SIZE,_0x24c5c2[_0x344066(0xb3)]);fileReader[_0x344066(0x124)]=()=>{const _0x539296=_0x344066;try{dataChannel[_0x539296(0x94)](fileReader[_0x539296(0x15c)]),console['log'](_0x539296(0x15b)+(currentChunk+0x1)+'/'+_0x24c5c2[_0x539296(0xe6)]+_0x539296(0x14c)+_0x5eba53),currentChunk++,updateProgressBar(_0x5eba53,currentChunk/_0x24c5c2[_0x539296(0xe6)]*0x64),setTimeout(()=>sendFileChunks(_0x5eba53),0xa);}catch(_0x20e313){console[_0x539296(0xe2)](_0x539296(0xd6),_0x5eba53,_0x20e313),hideProgressBar(_0x5eba53),activeTransfers[_0x539296(0x15f)](_0x5eba53),alert(_0x539296(0x173)),retryCounts[_0x539296(0x15f)](_0x5eba53);throw _0x20e313;}},fileReader['onerror']=()=>{const _0x841321=_0x344066;console[_0x841321(0xe2)](_0x841321(0x164),_0x5eba53),hideProgressBar(_0x5eba53),activeTransfers[_0x841321(0x15f)](_0x5eba53),alert(_0x841321(0x178)),retryCounts[_0x841321(0x15f)](_0x5eba53);};const _0x2294dd=_0x24c5c2[_0x344066(0x171)][_0x344066(0xef)](_0x5207c0,_0xd019a4);fileReader[_0x344066(0x186)](_0x2294dd);}function resendFileChunk(_0x3b0865,_0x2860fd){const _0x5eb7bf=_0x21b7d7,_0x1b6815=activeTransfers['get'](_0x3b0865);if(!_0x1b6815||_0x2860fd*CHUNK_SIZE>=_0x1b6815['fileSize']){console[_0x5eb7bf(0x132)]('Cannot\x20resend\x20chunk\x20'+_0x2860fd+_0x5eb7bf(0xdf)+_0x3b0865+_0x5eb7bf(0x191));return;}if(dataChannel[_0x5eb7bf(0x100)]>BUFFER_THRESHOLD){console[_0x5eb7bf(0x102)](_0x5eb7bf(0x192)+dataChannel[_0x5eb7bf(0x100)]+_0x5eb7bf(0x13e)+_0x3b0865),setTimeout(()=>resendFileChunk(_0x3b0865,_0x2860fd),0xc8);return;}const _0x49eb6b=_0x2860fd*CHUNK_SIZE,_0xad8495=Math['min'](_0x49eb6b+CHUNK_SIZE,_0x1b6815['fileSize']);fileReader[_0x5eb7bf(0x124)]=()=>{const _0x158b57=_0x5eb7bf;try{dataChannel[_0x158b57(0x94)](fileReader[_0x158b57(0x15c)]),console[_0x158b57(0x102)]('Resent\x20file\x20chunk\x20'+(_0x2860fd+0x1)+'/'+_0x1b6815[_0x158b57(0xe6)]+'\x20for\x20messageId\x20'+_0x3b0865);}catch(_0x352f2c){console[_0x158b57(0xe2)](_0x158b57(0xec)+_0x2860fd+_0x158b57(0xdf)+_0x3b0865+':',_0x352f2c);}},fileReader[_0x5eb7bf(0x13d)]=()=>{console['error']('FileReader\x20error\x20during\x20resend\x20for\x20messageId:\x20'+_0x3b0865);};const _0x431b0d=_0x1b6815[_0x5eb7bf(0x171)][_0x5eb7bf(0xef)](_0x49eb6b,_0xad8495);fileReader[_0x5eb7bf(0x186)](_0x431b0d);}function showProgressBar(_0x499824,_0x204044){const _0x3d57fe=_0x21b7d7,_0x3db67b=_0x204044?_0x3d57fe(0x153):_0x3d57fe(0x96),_0x4b81ee=_0x204044?activeTransfers[_0x3d57fe(0x162)](_0x499824)?.[_0x3d57fe(0x111)]||_0x3d57fe(0x82):receivedFileInfo?.['fileName']||_0x3d57fe(0x82);$(_0x3d57fe(0x9b))[_0x3d57fe(0xa9)](_0x3d57fe(0xf0)+_0x3db67b+_0x3d57fe(0x128)+_0x499824+_0x3d57fe(0x133)+_0x4b81ee+_0x3d57fe(0x101)),$(_0x3d57fe(0x9b))[_0x3d57fe(0xb1)]($(_0x3d57fe(0x9b))[0x0]['scrollHeight']);}function updateProgressBar(_0x4e7a38,_0x24a653){const _0x2cf71a=_0x21b7d7,_0x43c152=Math['min'](0x64,Math['round'](_0x24a653));$(_0x2cf71a(0xbc)+_0x4e7a38+_0x2cf71a(0x159))[_0x2cf71a(0x129)](_0x2cf71a(0xc6),_0x43c152+'%')[_0x2cf71a(0x16b)](_0x2cf71a(0x15e),_0x43c152)[_0x2cf71a(0xeb)](_0x2cf71a(0x134))[_0x2cf71a(0x177)](_0x43c152+'%');}function hideProgressBar(_0x26b403){const _0x423778=_0x21b7d7;$('#progress-'+_0x26b403)[_0x423778(0x107)]();}function transitionToChat(){const _0x217b90=_0x21b7d7;$('#chat-section')[_0x217b90(0x170)](_0x217b90(0xc9))&&($(_0x217b90(0x15a))[_0x217b90(0x13b)]('d-flex')[_0x217b90(0x10f)](_0x217b90(0xc9)),$('#chat-section')[_0x217b90(0x13b)](_0x217b90(0xc9)),$(_0x217b90(0x11f))['prop']('disabled',![])[_0x217b90(0x177)](_0x217b90(0x193)),console[_0x217b90(0x102)]('Transitioned\x20to\x20chat\x20UI'));}function displayMessage(_0x442936,_0x491946,_0x51f630,_0x466bd4,_0x20220c,_0x5b0d26,_0x54c9a3,_0x30d1f0=null){const _0x472b83=_0x21b7d7,_0x12aaef=_0x51f630?'self':'other',_0x5a927a=_0x51f630?_0x472b83(0xe7):'',_0x1cfd3f=new Date()[_0x472b83(0x148)]([],{'hour':_0x472b83(0xb5),'minute':_0x472b83(0xb5)});let _0x23b969=_0x491946;if(_0x466bd4==='file'&&_0x20220c){const _0x4f8125=_0x30d1f0&&_0x30d1f0['startsWith'](_0x472b83(0x88)),_0x312da4=_0x30d1f0&&_0x30d1f0[_0x472b83(0xb8)](_0x472b83(0x117)),_0x198261=_0x30d1f0&&_0x30d1f0[_0x472b83(0xb8)](_0x472b83(0xcc)),_0x32dab0=_0x472b83(0x149)+_0x20220c+_0x472b83(0x15d)+_0x491946+_0x472b83(0x115),_0x355ae3=_0x472b83(0xa7)+_0x491946+_0x472b83(0x137);if(_0x4f8125)_0x23b969=_0x472b83(0xf1)+_0x20220c+_0x472b83(0x165)+_0x491946+_0x472b83(0x9f)+_0x355ae3+'\x20'+_0x32dab0;else{if(_0x312da4)_0x23b969=_0x472b83(0xb2)+_0x20220c+_0x472b83(0xfa)+_0x355ae3+'\x20'+_0x32dab0;else _0x198261?_0x23b969='<video\x20controls\x20src=\x22'+_0x20220c+'\x22\x20class=\x22mt-2\x22\x20style=\x22max-width:\x20300px;\x20max-height:\x20250px;\x20object-fit:\x20contain;\x22\x20class=\x22img-fluid\x20rounded\x22></video><br>'+_0x355ae3+'\x20'+_0x32dab0:_0x23b969=''+_0x355ae3+_0x32dab0;}}try{$('#chat-display')[_0x472b83(0xa9)](_0x472b83(0xae)+_0x12aaef+_0x472b83(0x8c)+_0x23b969+_0x472b83(0x197)+(_0x51f630?'':'<span\x20class=\x22name\x22\x20style=\x22font-size:12px;\x22>'+_0x442936+_0x472b83(0x11e))+'\x20'+_0x1cfd3f+'\x20'+_0x5a927a+_0x472b83(0xaf)),$(_0x472b83(0x9b))['scrollTop']($('#chat-display')[0x0][_0x472b83(0xaa)]),console[_0x472b83(0x102)](_0x472b83(0xf4)+_0x466bd4+':\x20'+_0x491946+',\x20fileType:\x20'+(_0x30d1f0||_0x472b83(0x85)));}catch(_0x137fc3){console['error'](_0x472b83(0xca)+_0x491946+':',_0x137fc3),alert(_0x472b83(0x183));}}function deletePeerFromSheet(_0x803799){const _0x127ca0=_0x21b7d7;if(!_0x803799){console['error'](_0x127ca0(0x104));return;}fetch(DELETE_URL,{'method':_0x127ca0(0xb7),'body':new URLSearchParams({'peerId':_0x803799})})[_0x127ca0(0xa6)](_0x2219d8=>_0x2219d8[_0x127ca0(0x177)]())[_0x127ca0(0xa6)](_0x6df68b=>console[_0x127ca0(0x102)](_0x127ca0(0x168),_0x803799,_0x6df68b))[_0x127ca0(0xd5)](_0x5e7c90=>console[_0x127ca0(0xe2)]('Delete\x20error\x20for\x20peerId:',_0x803799,_0x5e7c90));}async function startJoinConnection(_0x140281){const _0x2ef078=_0x21b7d7;console['log'](_0x2ef078(0x144)+_0x140281),$(_0x2ef078(0xde))[_0x2ef078(0x177)]('Waiting\x20for\x20offer...');let _0x50f0bf=Date['now']();pollingInterval=setInterval(async()=>{const _0x1e1025=_0x2ef078;if(Date['now']()-_0x50f0bf>CONNECTION_TIMEOUT){clearInterval(pollingInterval),$(_0x1e1025(0xde))[_0x1e1025(0x12a)](_0x1e1025(0x118),![])['text'](_0x1e1025(0x189)),$('#peerIdSubmit')['prop'](_0x1e1025(0x118),![])[_0x1e1025(0x177)]('Connect'),alert(_0x1e1025(0xed));return;}const _0x34101a=await fetchSDP(_0x140281,_0x1e1025(0x154));if(_0x34101a){console[_0x1e1025(0x102)](_0x1e1025(0x18c)+_0x140281+_0x1e1025(0xd4)),clearInterval(pollingInterval);try{await setupAnswerer(_0x34101a),$(_0x1e1025(0xde))[_0x1e1025(0x177)](_0x1e1025(0x175));}catch(_0x1b9191){console[_0x1e1025(0xe2)](_0x1e1025(0xee),_0x1b9191),$(_0x1e1025(0xde))[_0x1e1025(0x12a)](_0x1e1025(0x118),![])[_0x1e1025(0x177)](_0x1e1025(0x189)),$(_0x1e1025(0x11f))['prop'](_0x1e1025(0x118),![])['text'](_0x1e1025(0x174)),alert(_0x1e1025(0x121));}}else console['log'](_0x1e1025(0x156)+_0x140281);},0xbb8);}function loadStunSettings(){const _0x7c51f6=_0x21b7d7,_0x217da9=['stun:stun.l.google.com:19302','stun:stun1.l.google.com:19302'],_0x3fae49=JSON[_0x7c51f6(0x97)](localStorage['getItem'](_0x7c51f6(0xdb))||'[]'),_0x58aa0f=_0x3fae49[_0x7c51f6(0x176)]>=0x2?_0x3fae49:_0x217da9;$(_0x7c51f6(0xdd))['each'](function(){const _0x4715b6=_0x7c51f6;$(this)['prop'](_0x4715b6(0xb9),_0x58aa0f[_0x4715b6(0x17c)](this[_0x4715b6(0xbf)]));});}
